# 02. 동작 파라미터화 코드 전달하기

## 동작 파라미터화

메서드 파라미터로 동작을 받아서 런타임에 수행

strategy pattern : 각 알고리즘을 캡슐화 하는 인터페이스 정의 후 런타임에 알고리즘 선택

### 익명 클래스

클래스 선언과 동시에 인스턴서화

재사용하지 않을 클래스 정의를 남겨두지 않음

개발자의 가독성 및 숙련도 문제

### 람다 표현식

불필요한 정의를 없애고 간결하게 재구성

람다식의 인자를 제네릭으로 변환하여 추상화도 가능

### Q&A

Q1. 실제 동작 방식

---

# 03. 람다 표현식

## 람다 표현식

### 특징

익명 : 메서드명이 없음

함수 : 메서드처럼 특정 클래스에 종속되지 않음

- 하지만 파라미터 리스트, 바디, 반환 형식, 가능한 예외 리스트 포함

전달 : 람다 표현식을 메서드 파라미터로 전달 또는 변수에 저장 가능

간결성 : 코드 간결성

### 구성

```jsx
(Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight());
```

파라미터 리스트 : 메서드 파라미터

화살표 : 파라미터 리스트와 바디를 구분

람다 바디 : 람다의 반환값에 해당하는 표현식

### 종류

표현식 스타일

- return 생략

블록 스타일

- 블록으로 코드 감쌈
- 여러 줄 사용 가능
- return 사용하지 않으면 void

## 함수형 인터페이스

오직 하나의 추상 메서드만 가진 인터페이스

람다 표현식을 함수형 인터페이스의 인스턴스로 취급 가능

함수 디스크립터 : 람다의 시그니처를 설명하는 메서드 (함수형 인터페이스에서의 추상 메서드)

기본형 특화 : 박싱하지 않기 위해 제네릭을 사용하지 않는 함수형 인터페이스를 따로 제공

- ex) Predicate - IntPredicate

## 형식 검사, 형식 추론, 제약

### 형식 검사

1. 람다가 인자로 전달된 메서드 형식 검사

2. 파라미터로 전달된 람다에 대상 형식 기대

3. 람다는 추상 메서드를 정의하는 함수형 인터페이스

4. 함수 디스크립터에 정의 확인

5. 정의된 형식이 메서드의 기대 형식을 만족해야 함

### 형식 추론

컴파일러가 람다 표현식이 사용된 컨텍스트를 이용해서 람다 표현식과 관련된 함수형 인터페이스 추론

### 지역 변수 사용

자유 변수 활용 가능(람다 캡처링) : 파라미터로 넘겨지지 않은, 외부에서 정의된 변수

- 지역 변수는 final로 선언되어 있어야 사용 가능
    - 지역 변수는 스택에 위치하므로 참조 시점에는 사라질 가능성

## 메서드 참조

메서드 참조는 특정 메서드만을 호출하는, 람다의 축약형과 흡사

장점

- 가독성 향상 - 명시적으로 사용 메서드 참조하므로

종류

- 정적 메서드 참조
    - `(args) -> ClassName.staticMethod(args)`
    - `ClassName::staticMethod`
- 다양한 형식의 인스턴스 메서드 참조
    - `(arg0, rest) -> arg0.instanceMethod(rest)`
        - args0 는 ClassName 형식
    - `ClassName::instanceMethod`
- 기존 객체의 인스턴스 메서드 참조
    - `(args) -> expr.instanceMethod(args)`
    - `expr::instanceMethod`

### 생성자 참조

예시

- ClassName::new

## 람다 표현식을 조합할 수 있는 유용한 메서드

### Comparator

```jsx
inventory.sort(comparing(Apple::getWeight)
	.reversed()
	.thenComparing(Apple::getCountry));
```

### Predicate

```jsx
redApple.and(apple -> apple.getWiehgt() > 150)
	.or(apple -> GREEN.equals(a.getColor()));
```

### Function
