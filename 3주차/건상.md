# 04. 스트림 소개

## 스트림

### 장점

- 선언형으로 컬렉션 데이터 처리 가능 - 더 간결하고 가독성 향상
- 조립 가능 - 사용 시 유연성 향상
- 멀티 스레드 코드 구현하지 않고도 데이터를 투명하게 병렬 처리 - 성능 향상

### 정의

데이터 처리 연산을 지원하도록 소스에서 추출된 연속된 요소

- 연속된 요소 : 특정 요소 형식으로 이루어진 연속된 값 집합의 인터페이스
- 소스 : 데이터를 제공하는 곳 (컬렉션, 배열, I/O 자원 등)
- 데이터 처리 연산 : 데이터를 조작하는 연산

### 특징

- 파이프라이닝 : 스트림 연산끼리 연결해서 파이프라인 구성 가능하도록 스트림 자신을 반환
    - laziness, short-circuiting 같은 최적화도 얻을 수 있음
- 내부 반복

## 스트림과 컬렉션

### 공통점

- 연속된 요소 형식의 값을 저장하는 자료구조 인터페이스 제공

### 차이점

- 스트림은 데이터를 요청할 때 값을 계산하지만 컬렉션은 미리 모든 계산을 완료
    - 무제한의 소수 계산 예시
- 외부 반복과 내부 반복
    - 외부 반복 : 호출자가 반복 제어
        - 순서, 중단, 분기 등을 호출자가 관리
        - 병렬성을 호출자가 관리
    - 내부 반복 : 라이브러리에서 반복 제어
        - 선언적으로 전달 받은 연산에 맞춰 라이브러리 내부에서 반복 관리
        - 병렬성도 라이브러리에서 관리

## 스트림 연산

### 중간 연산

연결할 수 있는 스트림 연산

특징

- 다른 스트림을 반환
- 단말 연산을 스트림 파이프라인에 실행하기 전까지 아무 연산도 수행하지 않음 (lazy)

최적화

- short-circuit
- loop fusion

### 최종 연산

스트림을 닫는 연산

특징

- 스트림 이외의 결과 반환
